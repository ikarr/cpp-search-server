# Поисковый сервер

## Проект в рамках обучения на курсе Яндекс Практикум

SearchServer – функциональная и производительная система добавления и поиска текстовых документов. Умеет работать с несколькими процессорными потоками. Данная система поддерживает:
* добавление текстовых документов в формате строк;
* индексированный поиск по словам документа: учёт минус-слов, фильтрация результатов с использованием списка стоп-слов;
* подсчёт релевантности документа по статистической мере TF-IDF;
* вывод документов в порядке убывания релевантности;
* возможность создания и обработки очереди из запросов;
* удаление дубликатов документов из базы;
* постраничная разбивка поисковой выдачи;
* параллельное выполнение нескольких запросов.

### Архитектура проекта

Инициализация поисковой системы происходит при добавлении контейнера со стоп-словами, разделенными пробелами. В архитектуре представлены следующие модули:

1. В `search_server` расположена базовая логика системы и её сущности. С помощью метода `AddDocument` в базу системы добавляются документы, после чего происходит их обработка: проверка номера документа и его слов на валидность, разбивка строк на отдельные слова с исключением стоп-слов, вычисление среднего рейтинга и занесение слов в индекс. Также здесь сосредоточены методы по парсингу поискового запроса, определению степени соответствия документов в базе поисковому запросу (матчингу) и выдаче топ-5 наиболее релевантных документов.
2. `read_input_functions` считывает текстовые запросы из потока ввода.
3. В `string_processing` происходит разбиение строки на слова. Здесь стоит упомянуть, что в систему внедрён введённый в стандарте C++17 тип `std::string_view`, позволяющий более экономично передавать неизменную строку в другой участок кода.
4. `document` хранит в себе структуру документа, а также метод его вывода в поток.
5. `paginator` позволяет разбить поисковую выдачу на страницы.
6. В `request_queue` сосредоточена логика обработки очереди из запросов.
7. `process_queries` делегирует обработку запросов нескольким потокам процессора.
8. `concurrent_map` реализует многопоточность при использовании контейнера STL `std::map`: словарь разбивается на несколько подсловарей с непересекающимся набором ключей, каждый из которых защищён отдельным мьютексом. Тогда при обращении разных потоков к разным ключам они нечасто будут попадать в один и тот же подсловарь, а значит, смогут параллельно его обрабатывать.
9. `test_example_functions` содержит юнит-тесты.

### Сборка и запуск проекта

Сборка с помощью любой IDE либо сборка из командной строки. Требуется компилятор С++ с поддержкой стандарта C++17 или новее.